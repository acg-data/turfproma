<!-- Global CTA Section with Free Estimate Form -->
<section class="py-20 bg-brand-900 relative overflow-hidden">
    <div class="absolute inset-0">
        <div class="absolute top-0 left-0 w-full h-full bg-brand-800/50"></div>
    </div>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
            <div>
                <h2 class="text-4xl font-bold text-white mb-6">Ready for a Beautiful Lawn?</h2>
                <p class="text-brand-100 text-lg mb-8 leading-relaxed">Join hundreds of satisfied homeowners who trust Turf Pro for their lawn care needs. Get your free lawn inspection and estimate today.</p>
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="tel:5085437648" class="inline-flex items-center justify-center px-8 py-4 bg-brand-700 text-white font-bold rounded-xl hover:bg-brand-600 transition-colors border border-brand-500">
                        <i data-lucide="phone" class="w-5 h-5 mr-2"></i> (508) 543-7648
                    </a>
                </div>
            </div>

            <div class="bg-slate-100/95 backdrop-blur-md p-8 rounded-2xl border border-slate-300 shadow-xl">
                <div class="text-center mb-6">
                    <p class="text-brand-600 text-sm font-semibold uppercase tracking-wide">Schedule your Free</p>
                    <h3 class="text-2xl font-bold text-slate-900">Lawn Inspection/Estimate Today!</h3>
                </div>
                
                <form id="cta-contact-form" class="space-y-4">
                    <div class="relative">
                        <select name="service" class="w-full h-12 px-4 rounded-md text-slate-800 bg-white border border-slate-300 focus:ring-2 focus:ring-brand-500 appearance-none cursor-pointer">
                            <option value="">Select Service(s)*</option>
                            <option value="Lawn Fertilization Plan">Lawn Fertilization Plan</option>
                            <option value="Mosquito & Tick Control">Mosquito & Tick Control</option>
                            <option value="Aeration">Aeration</option>
                            <option value="Aeration + Overseed">Aeration + Overseed</option>
                            <option value="Multiple Services">Multiple Services (We'll discuss)</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-4 top-3.5 text-slate-400 pointer-events-none w-5 h-5"></i>
                    </div>

                    <input type="text" name="address" placeholder="Enter Full Address*" class="w-full h-12 px-4 rounded-md text-slate-800 bg-white border border-slate-300 focus:ring-2 focus:ring-brand-500 placeholder:text-slate-400">

                    <input type="text" name="name" placeholder="Name*" required class="w-full h-12 px-4 rounded-md text-slate-800 bg-white border border-slate-300 focus:ring-2 focus:ring-brand-500 placeholder:text-slate-400">

                    <input type="email" name="email" placeholder="Email" class="w-full h-12 px-4 rounded-md text-slate-800 bg-white border border-slate-300 focus:ring-2 focus:ring-brand-500 placeholder:text-slate-400">

                    <input type="tel" name="phone" placeholder="Phone Number*" required class="w-full h-12 px-4 rounded-md text-slate-800 bg-white border border-slate-300 focus:ring-2 focus:ring-brand-500 placeholder:text-slate-400">

                    <div class="flex items-start gap-3 mt-2">
                        <input type="checkbox" name="terms" class="mt-1 w-4 h-4 rounded border-slate-300 text-brand-500 focus:ring-brand-500">
                        <p class="text-xs text-slate-500">*All advertised offers are subject to lawn size approval. By pressing "Schedule FREE Estimate" you agree to our terms and conditions and privacy policy.</p>
                    </div>

                    <button type="submit" class="w-full bg-[#226638] hover:bg-brand-500 text-white font-bold py-4 rounded-md transition duration-300 text-lg shadow-lg mt-2">
                        Schedule FREE Estimate
                    </button>

                    <div id="cta-form-status" class="hidden text-center text-sm py-2 rounded-lg"></div>
                </form>

                <div class="mt-6 flex justify-center items-center gap-6 border-t border-slate-200 pt-4">
                    <div class="flex items-center gap-1">
                        <span class="font-bold text-lg text-slate-700">G</span>
                        <div class="flex text-yellow-400 text-xs">★★★★★</div>
                        <div class="text-[10px] leading-tight ml-1 text-slate-500">4.9<br>RATING</div>
                    </div>
                    <div class="flex items-center gap-1">
                        <i data-lucide="facebook" class="w-4 h-4 text-slate-600"></i>
                        <div class="flex text-yellow-400 text-xs">★★★★★</div>
                        <div class="text-[10px] leading-tight ml-1 text-slate-500">4.9<br>RATING</div>
                    </div>
                    <div class="flex items-center gap-1 border-l border-slate-200 pl-4">
                        <span class="font-serif font-bold italic text-sm text-slate-700">BBB</span>
                        <div class="text-[9px] uppercase leading-tight ml-1 text-slate-500">Accredited<br>Business</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
(function() {
    const ctaForm = document.getElementById('cta-contact-form');
    if (ctaForm) {
        ctaForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const statusEl = document.getElementById('cta-form-status');
            const submitBtn = ctaForm.querySelector('button[type="submit"]');
            const originalBtnText = submitBtn.textContent;
            
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
            statusEl.className = 'hidden';
            
            const formData = new FormData(ctaForm);
            const data = Object.fromEntries(formData.entries());
            
            try {
                const response = await fetch('/api/contact', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                if (response.ok) {
                    statusEl.textContent = 'Request sent! We\'ll be in touch soon.';
                    statusEl.className = 'text-center text-sm py-2 rounded-lg bg-green-100 text-green-700';
                    ctaForm.reset();
                } else {
                    throw new Error('Failed to send');
                }
            } catch (error) {
                statusEl.textContent = 'Failed to send. Please call us instead.';
                statusEl.className = 'text-center text-sm py-2 rounded-lg bg-red-100 text-red-700';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
            }
        });
    }
})();
</script>
